{% extends "base.html" %}

{% block content %}
<div class="header">
    <h2>Má»¥c tiÃªu Tiáº¿t kiá»‡m</h2>
    <a href="{{ url_for('new_goal') }}" class="btn btn-primary">+ ThÃªm má»¥c tiÃªu</a>
</div>

<!-- Tá»•ng quan -->
<div class="stats">
    <div class="stat-card">
        <span class="icon">ğŸ¯</span>
        <div>
            <p class="label">Tá»•ng má»¥c tiÃªu</p>
            <p class="value">{{ summary.totalTarget | format_currency }}</p>
        </div>
    </div>
    
    <div class="stat-card">
        <span class="icon">ğŸ’°</span>
        <div>
            <p class="label">ÄÃ£ tiáº¿t kiá»‡m</p>
            <p class="value success">{{ summary.totalCurrent | format_currency }}</p>
        </div>
    </div>
    
    <div class="stat-card">
        <span class="icon">ğŸ“Š</span>
        <div>
            <p class="label">Tiáº¿n Ä‘á»™</p>
            <p class="value">{{ summary.overallProgress }}%</p>
        </div>
    </div>
</div>

<!-- Danh sÃ¡ch má»¥c tiÃªu -->
{% if summary.goals %}
<div class="goals-grid">
    {% for goal in summary.goals %}
    <div class="goal-card">
        <h3>{{ goal.name }}</h3>
        {% if goal.deadline %}
        <p class="deadline">ğŸ—“ï¸ {{ goal.deadline | format_date }}</p>
        {% endif %}
        
        <div class="progress-section">
            <div class="amounts">
                <span class="current">{{ goal.currentAmount | format_currency }}</span>
                <span class="target">/ {{ goal.targetAmount | format_currency }}</span>
            </div>
            
            <div class="progress-bar">
                <div class="progress-fill" style="width: {{ goal.progress }}%"></div>
            </div>
            <p class="progress-text">{{ goal.progress }}% hoÃ n thÃ nh</p>
        </div>
        
        <!-- Form thÃªm tiá»n nhanh -->
        <form method="POST" action="{{ url_for('add_amount', goal_id=goal.id) }}" class="quick-add">
            <input type="number" name="amount" placeholder="Sá»‘ tiá»n thÃªm" step="1000" min="0" required>
            <button type="submit" class="btn btn-sm btn-success">+ ThÃªm</button>
        </form>
        
        <div class="actions">
            <a href="{{ url_for('edit_goal', goal_id=goal.id) }}" class="btn btn-sm">Sá»­a</a>
            <form method="POST" action="{{ url_for('delete_goal', goal_id=goal.id) }}" style="display:inline" 
                  onsubmit="return confirm('XÃ³a má»¥c tiÃªu {{ goal.name }}?')">
                <button type="submit" class="btn btn-sm btn-danger">XÃ³a</button>
            </form>
        </div>
    </div>
    {% endfor %}
</div>
{% else %}
<div class="empty-state">
    <span class="icon-large">ğŸ¯</span>
    <h3>ChÆ°a cÃ³ má»¥c tiÃªu nÃ o</h3>
    <p>Táº¡o má»¥c tiÃªu Ä‘áº§u tiÃªn Ä‘á»ƒ báº¯t Ä‘áº§u tiáº¿t kiá»‡m</p>
    <a href="{{ url_for('new_goal') }}" class="btn btn-primary">+ Táº¡o má»¥c tiÃªu</a>
</div>
{% endif %}
{% endblock %}